
var decodeURI = function (str) {
  if (str && str.length > 0) {
    return decodeURIComponent(str.toString().replace('+', '%20'));
  }
  return '';
}

var httpsURI = function (uri) {
  if (uri && uri.length > 0) {
    return uri.replace('http://', 'https://');
  }
  return '';
}

var navigateUrl = function (rule) {
  var url;
  if (rule.name && rule.name.length > 0) {
    var ruleName = rule.name.toLowerCase();
    if (ruleName === 'productDetail'.toLowerCase()) {
      url = '../product/productDetail/productDetail?prod_id=' + rule.prod_id;
    }
    else if (ruleName === 'productList'.toLowerCase()) {
      url = '../product/productList/productList?prod_classid=' + rule.class_id + '&prod_brand=' + rule.brand;
    }
    else if (ruleName === 'productSearch'.toLowerCase()) {
      url = '../product/productSearch/productSearch?keyword=' + encodeURIComponent(rule.keyword);
    }
    else if (ruleName === 'vproductList'.toLowerCase()) {
      url = '../product/vproductList/vproductList?prod_classid=' + rule.class_id;
    }
    else if (ruleName === 'topicProductList'.toLowerCase()) {
      url = '../product/topicProductList/topicProductList?prod_classid=' + rule.class_id + '&prefer_id=' + rule.prefer_id;
    }
    else if (ruleName === 'scoreExchange'.toLowerCase()) {
      url = '../scoreExch/scoreExch?ticket_id=' + rule.ticket_activity_id;
    }
  }
  if (!url) {
    url = '../index/index';
  }
  return url;
}

module.exports = {
  decodeuri: decodeURI,
  httpsuri: httpsURI,
  navigateurl: navigateUrl
}