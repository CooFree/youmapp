<wxs src="../../../utils/tools.wxs" module="tools" />

<view class="container greybg">
    <view class="m-shipAddress ma-layort">
        <view class="u-icon u-address-bg">
        </view>
        <view class="item">
            <view class="left">
            </view>
            <view class="middle">
                <view class="phone"></view>
                <view class="addr">
                    + 新建收货地址
                </view>
            </view>
            <view class="right">
                <i class="icon icon-right ion-ios-arrow-right"></i>
            </view>
        </view>
    </view>

    <view class="Payway ma-layort">
        <view class="hd">
            支付方式
        </view>
        <view class="ma-list">
            <view class="item" data-paytype="weixin" bindtap="selectPaytype">
                <i class="icon ion-ios-circle-outline {{paytype==='weixin'?'icon-ischecked-g':'icon-nochecked-g'}}"></i>
                <view class="paywayItem">
                    <image class="pic" src="https://img02.camel.com.cn/image/wx_icon.png" alt=""></image>
                    <text class="txt">微信</text>
                </view>
            </view>
            <view class="item" data-paytype="outpay" bindtap="selectPaytype">
                <i class="icon ion-ios-circle-outline"></i>
                <text class="txt">货到付款，客服会和您电话确认订单</text>
            </view>
        </view>
    </view>

    <view class="Payway EXPway ma-layort">
        <view class="hd">配送方式</view>
        <view class="ma-list">
            <view class="item" wx:for="{{deliveryList}}" wx:key="{{index}}" data-deliveryid="{{item.id}}" bindtap="selecDelivery"
            wx:if="{{(paytype === 'outpay' && item.outpay_flag === 1)||(paytype !== 'outpay' && item.outpay_flag === 0)}}">
                <i class="icon ion-checkmark-circled {{item.id===deliveryId?'icon-ischecked-g':'icon-nochecked-g'}}"></i>
                <text class="txt">{{tools.decodeuri(item.name)}}{{item.free_amount > 0 ? '（满' + item.free_amount + '元包邮）' : ''}}</text>
            </view>
        </view>
    </view>

    <view class="campaigns">
        <view class="left">
            <view class="item">
                <text class="txt">暂无优惠活动</text>
            </view>
        </view>
        <view class="right"></view>
    </view>

    <view class="ma-plist ma-layort">
        <view class="hd">我的商品</view>
        <view class="m-cartGroup">
            <ul class="list">
                <li class="item" wx:for="{{productList}}" wx:key="{{index}}">
                    <view class="inner">
                        <view class="m-good">
                            <view class="imgWrap">
                                <image src="{{tools.httpsuri(item.image_url+'!prodimg100')}}" alt=""></image>
                            </view>
                            <view class="cnt">
                                <view class="xbox">
                                    <text class="line1">{{tools.decodeuri(item.prod_name)}}</text>
                                    <text class="count">x{{item.volume}}</text>
                                </view>
                                <text class="line2">{{tools.decodeuri(item.spec_color)}}*{{tools.decodeuri(item.spec_size)}}</text>
                                <text class="line3">￥{{tools.tofixed(item.last_price,2)}}</text>
                            </view>
                        </view>
                    </view>
                </li>

                <li class="item" wx:for="{{giftList}}" wx:key="{{index}}">
                    <view class="inner">
                        <view class="m-good">
                            <view class="imgWrap">
                                <image src="{{tools.httpsuri(item.gift_image_url+'!prodimg100')}}" alt=""></image>
                            </view>
                            <view class="cnt">
                                <view class="xbox">
                                    <text class="line1">{{tools.decodeuri(item.gift_name)}}</text>
                                    <text class="count">x{{item.volume}}</text>
                                </view>
                                <text class="line2">{{tools.decodeuri(item.specificate)}}</text>
                                <text class="line3">￥{{tools.tofixed(item.price,2)}}</text>
                            </view>
                        </view>
                    </view>
                </li>
            </ul>
            <view class="extraInfo" style="display: none;">
                <text class="txt">不支持无理由退换货</text>
                <i class="icon ion-information-circled"></i>
            </view>
        </view>
    </view>

    <view class="ma-layort">
        <view class="m-listItem">
            <view class="left">你拥有优惠券</view>
            <view class="middel">{{ticketList.length}}张
            </view>
            <view class="right">
                <i class="icon icon-right ion-ios-arrow-right"></i>
            </view>
        </view>
    </view>

    <view class="ma-layort">
        <view class="m-listItem">
            <view class="left" bindtap="checkInvoice">
                <i class="icon ion-ios-circle-outline {{invoiceFlag===1?'icon-ischecked-g':'icon-nochecked-g'}}"></i>
                <text class="txt">我要开发票</text>
            </view>
        </view>
        <view class="m-invoiceView {{invoiceFlag===1?'':'hide'}}">
            <input placeholder="请输入发票抬头" class="txtiput" />
        </view>
    </view>

    <view class="ma-layort">
        <ul class="m-list m-summary">
            <li class="item">
                <view class="left">商品合计</view>
                <view class="right">￥{{tools.tofixed(prodAmount,2)}}</view>
            </li>
            <li class="item">
                <view class="left">优惠金额</view>
                <view class="right">￥{{tools.tofixed(preferential,2)}} </view>
            </li>
            <li class="item">
                <view class="left">运费</view>
                <view class="right">￥{{tools.tofixed(deliveryFee,2)}} </view>
            </li>
            <li class="item">
                <view class="left">购物积分</view>
                <view class="right">{{giveScore}}</view>
            </li>
        </ul>
    </view>

    <view class="ocViewFt">
        <view class="empty-block"></view>
        <view class="main">
            <view class="left">
                <text class="actualPrice">应付:￥{{tools.tofixed(orderAmount,2)}}</text>
            </view>
            <view class="right" bindtap="onOrder">
                <view class="btn w-button">{{submiting?'提交中...':'去付款'}}</view>
            </view>
        </view>
    </view>

</view>